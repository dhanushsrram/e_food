<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FoodieExpress | Zomato Theme</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<style>
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    'primary-red': '#E23744',
                    'secondary-orange': '#F87171',
                    'dark-bg': '#1B1B1B',
                    'dark-card': '#2C2C2C'
                },
                fontFamily: { sans: ['Inter', 'sans-serif'] }
            }
        }
    }
    body { font-family: 'Inter', sans-serif; transition: background-color 0.3s; background-color: #FFF5F5; }
    .dark body { background-color: #1B1B1B; color: #fff; }
</style>
</head>
<body class="transition-colors duration-300">
<div id="app" class="min-h-screen">

<!-- Header -->
<header class="sticky top-0 bg-white dark:bg-dark-bg shadow-md z-40">
    <div class="max-w-7xl mx-auto flex justify-between items-center px-4 py-3">
        <button onclick="App.setView('home')" class="text-2xl font-bold text-primary-red hover:text-secondary-orange transition duration-200">
            <i class="fas fa-motorcycle mr-1"></i> FoodieExpress
        </button>
        <div class="flex items-center space-x-4">
            <button id="darkModeToggle" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition duration-200">
                <i id="darkModeIcon" class="fas fa-moon"></i>
            </button>
            <button onclick="App.setView('cart')" class="relative p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition duration-200">
                <i class="fas fa-shopping-cart text-lg"></i>
                <span id="cartCount" class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-secondary-orange rounded-full">0</span>
            </button>
            <button class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition duration-200">
                <i class="fas fa-user-circle text-xl"></i>
            </button>
        </div>
    </div>
</header>

<!-- Main Container -->
<main id="app-container" class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
    <div class="text-center py-16">
        <i class="fas fa-spinner fa-spin text-4xl text-primary-red"></i>
        <p class="mt-4 text-gray-600 dark:text-gray-400">Loading FoodieExpress...</p>
    </div>
</main>

<!-- Order Confirmation Modal -->
<div id="orderConfirmationModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
    <div class="bg-white dark:bg-dark-card p-8 rounded-xl shadow-2xl max-w-sm w-full text-center transform transition-all scale-100">
        <i class="fas fa-check-circle text-green-500 text-6xl mb-4 animate-bounce"></i>
        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Order Placed Successfully!</h3>
        <p class="text-gray-600 dark:text-gray-400 mb-6">Your order will be delivered shortly.</p>
        <button onclick="App.setView('track'); closeModal('orderConfirmationModal');" class="w-full bg-secondary-orange text-white py-3 rounded-xl font-semibold hover:bg-orange-600 transition duration-200 shadow-md">
            Track Your Order
        </button>
    </div>
</div>
</div>

<script>
const USD_TO_INR = 85; // Conversion
function formatINR(amount){ return `₹${amount.toFixed(0)}`; }

const RESTAURANTS_DATA = [
    {id:1, name:"The Pizza Planet", cuisine:"Italian, Pizza", rating:4.5, time:"30-40 min", offer:"20% OFF", imageUrl:"https://placehold.co/100x100/f87171/ffffff?text=Pizza", minOrder:15*USD_TO_INR, deliveryFee:3*USD_TO_INR },
    {id:2, name:"Biryani House", cuisine:"Indian, Mughlai", rating:4.8, time:"25-35 min", offer:"Free Delivery", imageUrl:"https://placehold.co/100x100/f59e0b/ffffff?text=Biryani", minOrder:10*USD_TO_INR, deliveryFee:0 },
    {id:3, name:"Burger King", cuisine:"Fast Food, American", rating:4.2, time:"45-55 min", offer:"Buy 1 Get 1", imageUrl:"https://placehold.co/100x100/34d399/ffffff?text=Burger", minOrder:8*USD_TO_INR, deliveryFee:2.5*USD_TO_INR },
];

const MENU_DATA = {
    1: [
        {id:101, name:"Pepperoni Passion", price:12.99*USD_TO_INR, desc:"Classic pizza with spicy pepperoni and mozzarella.", imageUrl:"https://placehold.co/50x50/ef4444/ffffff?text=P1"},
        {id:102, name:"Margherita Gold", price:9.50*USD_TO_INR, desc:"Basil, tomato, fresh mozzarella.", imageUrl:"https://placehold.co/50x50/f97316/ffffff?text=P2"},
        {id:103, name:"Veggie Delight", price:11.50*USD_TO_INR, desc:"Bell peppers, olives, and onion.", imageUrl:"https://placehold.co/50x50/f59e0b/ffffff?text=P3"},
    ],
    2: [
        {id:201, name:"Chicken Hyderabadi Biryani", price:15.99*USD_TO_INR, desc:"Layered rice with tender chicken.", imageUrl:"https://placehold.co/50x50/10b981/ffffff?text=B1"},
        {id:202, name:"Mutton Dum Biryani", price:17.99*USD_TO_INR, desc:"Slow-cooked mutton biryani.", imageUrl:"https://placehold.co/50x50/34d399/ffffff?text=B2"},
        {id:203, name:"Veg Korma", price:10.50*USD_TO_INR, desc:"Creamy vegetable curry.", imageUrl:"https://placehold.co/50x50/60a5fa/ffffff?text=B3"},
    ]
};

const App = {
    currentView:'home',
    cart:[],
    setView(view){
        this.currentView = view;
        this.render();
    },
    addToCart(item){
        const found = this.cart.find(i=>i.id===item.id);
        if(found){ found.qty++; } else { this.cart.push({...item, qty:1}); }
        this.updateCartCount();
        alert(`${item.name} added to cart!`);
    },
    removeFromCart(id){
        this.cart = this.cart.filter(i=>i.id!==id);
        this.updateCartCount();
        this.render();
    },
    updateCartCount(){ document.getElementById('cartCount').innerText=this.cart.reduce((a,b)=>a+b.qty,0); },
    clearCart(){ this.cart=[]; this.updateCartCount(); this.setView('home'); },
    render(){
        const container=document.getElementById('app-container');
        if(this.currentView==='home'){
            container.innerHTML = '<div class="grid md:grid-cols-3 gap-6">';
            RESTAURANTS_DATA.forEach(r=>{
                container.innerHTML += `
                <div class="bg-white dark:bg-dark-card shadow-md rounded-lg p-4 cursor-pointer hover:shadow-xl transition duration-200" onclick="App.setView('menu-${r.id}')">
                    <img src="${r.imageUrl}" class="w-full h-32 object-cover rounded-lg mb-3">
                    <h3 class="text-lg font-bold text-gray-900 dark:text-white">${r.name}</h3>
                    <p class="text-gray-600 dark:text-gray-400">${r.cuisine}</p>
                    <p class="text-sm mt-1">⭐ ${r.rating} • ${r.time} • Min ${formatINR(r.minOrder)}</p>
                    <span class="text-primary-red font-semibold">${r.offer}</span>
                </div>`;
            });
            container.innerHTML += '</div>';
        } else if(this.currentView.startsWith('menu-')){
            const id = parseInt(this.currentView.split('-')[1]);
            const restaurant = RESTAURANTS_DATA.find(r=>r.id===id);
            const menu = MENU_DATA[id];
            container.innerHTML = `<button onclick="App.setView('home')" class="mb-4 text-primary-red font-semibold"><i class="fas fa-arrow-left"></i> Back</button>`;
            container.innerHTML += `<h2 class="text-2xl font-bold mb-4">${restaurant.name}</h2>`;
            container.innerHTML += '<div class="grid md:grid-cols-2 gap-4">';
            menu.forEach(item=>{
                container.innerHTML += `
                <div class="bg-white dark:bg-dark-card p-4 rounded-lg shadow-md flex justify-between items-center">
                    <div>
                        <h3 class="font-semibold text-gray-900 dark:text-white">${item.name}</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-sm">${item.desc}</p>
                        <p class="mt-1 font-bold text-primary-red">${formatINR(item.price)}</p>
                    </div>
                    <button onclick="App.addToCart(${JSON.stringify(item)})" class="bg-primary-red text-white px-4 py-2 rounded-lg hover:bg-secondary-orange transition duration-200">Add</button>
                </div>`;
            });
            container.innerHTML += '</div>';
        } else if(this.currentView==='cart'){
            container.innerHTML = `<h2 class="text-2xl font-bold mb-4">Your Cart</h2>`;
            if(this.cart.length===0){
                container.innerHTML += '<p class="text-gray-600 dark:text-gray-400">Cart is empty!</p>';
                return;
            }
            container.innerHTML += '<div class="space-y-4">';
            let total=0;
            this.cart.forEach(item=>{
                total+=item.price*item.qty;
                container.innerHTML += `
                <div class="bg-white dark:bg-dark-card p-4 rounded-lg flex justify-between items-center">
                    <div>
                        <h3 class="font-semibold text-gray-900 dark:text-white">${item.name} x${item.qty}</h3>
                        <p class="text-primary-red font-bold">${formatINR(item.price*item.qty)}</p>
                    </div>
                    <button onclick="App.removeFromCart(${item.id})" class="text-red-500 hover:text-red-700"><i class="fas fa-trash"></i></button>
                </div>`;
            });
            container.innerHTML += `
                <div class="mt-4 flex justify-between items-center">
                    <span class="font-bold text-lg">Total:</span>
                    <span class="font-bold text-lg text-primary-red">${formatINR(total)}</span>
                </div>
                <button onclick="App.placeOrder()" class="mt-4 w-full bg-secondary-orange text-white py-3 rounded-lg font-semibold hover:bg-orange-600 transition duration-200 shadow-md">Place Order</button>`;
        }
    },
    placeOrder(){
        if(this.cart.length===0){ alert('Cart is empty!'); return; }
        this.clearCart();
        document.getElementById('orderConfirmationModal').classList.remove('hidden');
    }
}

// Dark Mode Toggle
document.getElementById('darkModeToggle').addEventListener('click',()=>{
    document.body.classList.toggle('dark');
    const icon=document.getElementById('darkModeIcon');
    icon.classList.toggle('fa-moon');
    icon.classList.toggle('fa-sun');
});

// Close modal function
function closeModal(id){ document.getElementById(id).classList.add('hidden'); }

App.render();
</script>
</body>
</html>
